# 1. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á gradio ‡∏Å‡πà‡∏≠‡∏ô (‡∏ñ‡πâ‡∏≤‡∏£‡∏±‡∏ô‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ô‡∏µ‡πâ‡∏ã‡πâ‡∏≥)
!pip install gradio -q

import gradio as gr

# ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
def drug_reminder_gui(username, drug, starttime_str, interval_str, count_str, currenttime_str, confirm_‡∏ó‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß):
    # ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
    try:
        starttime = float(starttime_str)
        interval = float(interval_str)
        count = int(count_str)
        currenttime = float(currenttime_str)
    except ValueError:
        return "‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á", "", "", ""

    # ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
    notifytime = starttime + (interval * count)

    # ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
    result_text = f"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: {username}\n" \
                  f"‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≤‡∏ô: {drug}\n" \
                  f"‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: {notifytime:.2f} ‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤\n"

    # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
    if currenttime >= notifytime and confirm_‡∏ó‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß:
        status_text = f"üíñ ‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≤‡∏ô‡∏¢‡∏≤ {drug} ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞/‡∏Ñ‡∏£‡∏±‡∏ö üíñ"
        status_color = "green" # ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤
    else:
        status_text = "‚è∞ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≤‡∏ô‡∏¢‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô ‚è∞"
        status_color = "red" # ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤

    return result_text, notifytime, status_text, status_color

# ‡∏™‡∏£‡πâ‡∏≤‡∏á Theme ‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π
pink_theme = gr.themes.Soft(
    primary_hue="pink",
    secondary_hue="pink",
    neutral_hue="gray",
    font=[gr.themes.GoogleFont("Sarabun"), "ui-sans-serif", "system-ui", "sans-serif"], # ‡πÄ‡∏û‡∏¥‡πà‡∏° font ‡πÑ‡∏ó‡∏¢
    font_mono=gr.themes.GoogleFont("Fira Code"),
)

# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤ GUI
with gr.Blocks(theme=pink_theme, title="‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏≤‡∏ô‡∏¢‡∏≤") as demo:
    gr.Markdown("# üíäüå∏ ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏≤‡∏ô‡∏¢‡∏≤ (Pink Edition) üå∏üíä",
                 # style="color: #D02090;" # ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ
                 )
    gr.Markdown("---")
    
    with gr.Row():
        gr.Markdown("### üìù ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤")
        
    with gr.Row():
        username_input = gr.Textbox(label="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ", placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á", interactive=True)
        drug_input = gr.Textbox(label="‡∏ä‡∏∑‡πà‡∏≠‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≤‡∏ô", placeholder="‡πÄ‡∏ä‡πà‡∏ô Paracetamol", interactive=True)

    with gr.Row():
        starttime_input = gr.Textbox(label="‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)", placeholder="‡πÄ‡∏ä‡πà‡∏ô 8.00", interactive=True)
        interval_input = gr.Textbox(label="‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡πà‡∏≤‡∏á (‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)", placeholder="‡πÄ‡∏ä‡πà‡∏ô 6 (‡∏ó‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å 6 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)", interactive=True)
        count_input = gr.Textbox(label="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≤‡∏ô", placeholder="‡πÄ‡∏ä‡πà‡∏ô 3 (3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á)", interactive=True)
    
    with gr.Row():
        gr.Markdown("### ‚è∞ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô")

    with gr.Row():
        currenttime_input = gr.Textbox(label="‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)", placeholder="‡πÄ‡∏ä‡πà‡∏ô 14.30", interactive=True)
        confirm_checkbox = gr.Checkbox(label="‡∏â‡∏±‡∏ô‡∏ó‡∏≤‡∏ô‡∏¢‡∏≤‡πÅ‡∏•‡πâ‡∏ß", interactive=True)

    # ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• (‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π)
    process_button = gr.Button("üíñ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏ô‡∏¢‡∏≤ üíñ", variant="primary")
    
    gr.Markdown("---")
    with gr.Row():
        gr.Markdown("### ‚ú® ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå")

    # ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
    output_summary = gr.Textbox(label="‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•", lines=5, interactive=False)
    output_notifytime_hidden = gr.Textbox(visible=False) # ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ, ‡πÉ‡∏ä‡πâ‡πÅ‡∏Ñ‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤ notifytime
    
    # ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ó‡∏≤‡∏ô‡∏¢‡∏≤ (‡∏°‡∏µ‡∏™‡∏µ)
    output_status_message = gr.Markdown("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",
                                         elem_id="status_message") # ‡∏Å‡∏≥‡∏´‡∏ô‡∏î ID ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö CSS

    # ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏±‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
    process_button.click(
        fn=drug_reminder_gui,
        inputs=[username_input, drug_input, starttime_input, interval_input, count_input, currenttime_input, confirm_checkbox],
        outputs=[output_summary, output_notifytime_hidden, output_status_message, gr.State(value="")], # State ‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏µ
    )
    
    # ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
    demo.css = """
    #status_message p {
        font-size: 1.5em; /* ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
        font-weight: bold; /* ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏≤ */
        text-align: center; /* ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏≤‡∏á */
        padding: 10px; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô */
        border-radius: 8px; /* ‡∏Ç‡∏≠‡∏ö‡πÇ‡∏Ñ‡πâ‡∏á */
    }
    #status_message.green p {
        color: #FFFFFF; /* ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
        background-color: #D02090; /* ‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡πÄ‡∏Ç‡πâ‡∏° */
    }
    #status_message.red p {
        color: #FFFFFF; /* ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
        background-color: #FF69B4; /* ‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π */
    }
    """
    
    # ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï CSS ‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤
    demo.load(lambda value: gr.update(elem_id="status_message", classes=value),
             inputs=gr.State(value=""), # ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
             outputs=output_status_message)


# ‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°
demo.launch()
